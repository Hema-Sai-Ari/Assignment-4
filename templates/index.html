<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bull's Store</title>
  <!-- Link to Bootstrap CSS file -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
  <!-- Link to Font Awesome CSS file -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" />
  <style>
    html,
    body {
      height: 100%;
    }

    body {
      display: flex;
      flex-direction: column;

    }

    main {
      flex: 1;
    }

    .logo {
      float: left;
      height: 50px;
      padding: 5px 5px 5px 16px;
    }

    .nav-item {
      display: flex;
      align-items: center;
    }

    .navbar-dark .navbar-nav .nav-link {
      color: aliceblue;
    }

    .btn.btn-primary {
      background-color: #28a745;
      color: white;
      border-color: #28a745;
    }

    .sale-stamp {
      top: 0;
      right: 0;
      background-color: #ff0000;
      color: #ffffff;
      font-size: 18px;
      font-weight: bold;
      padding: 10px 15px;
      border-radius: 0 0 0 15px;
    }

    .sale-stamp span {
      display: block;
      transform: rotate(45deg);
    }

    .btn-primary:hover {
      background-color: #1e7e34;
      border-color: #1e7e34;
    }

    .card:hover {
      border: 1px solid #1e7e34;
      transition: all 0.3s ease-in-out;
    }

    .card-text .regular-price {
      font-size: 0.9rem;
      color: red;
      text-decoration: line-through;
      margin-bottom: 0;
    }

    .card-text .reduced-price {
      font-size: 1.35rem;
      color: #343a40;
      font-weight: bold;
      margin-top: 0.5rem
    }


    .display-4 {
      font-size: 3rem;
      font-weight: bold;
      margin-bottom: 1rem;
    }

    .lead {
      font-size: 1.5rem;
      font-weight: normal;
    }

    footer {
      margin-top: auto;
    }
  </style>


</head>

<body>
  <nav class="navbar navbar-expand-md navbar-dark bg-success fixed-top">
    <!-- USF Bulls Store brand -->
    <img class="logo" src="{{ url_for('static', filename='./images/USF-logo.jpg') }}" alt="logo" />
    <a class="navbar-brand" href="/">USF Bulls Store</a>
    <!-- Hamburger button for small screens -->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ml-auto">
        <!-- About button -->
        <li class="nav-item">
          <a class="nav-link" href="/"><i class="fa fa-home"></i>Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        {% if not 'user_info' in session %}
        <!-- Sign In button -->
        <li class="nav-item">
          <a class="nav-link" href="/signin">Sign In</a>
        </li>
        {% endif %}
        <!-- Analytics button -->
        <li class="nav-item">
          <a class="nav-link" href="/analytics">Analytics</a>
        </li>
        <!-- Cart button with icon -->
        <li class="nav-item">
          <a class="nav-link cart" href="/cart">
            Cart <i class="fas fa-shopping-cart"></i>
            <span class="item-count"></span>
          </a>
        </li>
        {% if 'user_info' in session %}
        <li class="nav-item">
          <i class="fa fa-user-circle"></i>
          <a class="nav-link">{{user[1]}}{{" "}}{{user[2]}}</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="{{ url_for('logout') }}" class="nav-link">Logout</a>
        </li>
        {% endif %}
      </ul>
    </div>
  </nav>
  <div class="container mt-5 py-5 text-center">
    <h1 class="display-4 mb-0">Welcome to the USF Bulls Store!</h1>
    <p class="lead">Shop for your favorite USF gear and show your school spirit.</p>
  </div>

  <section>
    <div class="container">
      <div class="row mb-4">
        <div class="col-md-12">
          <div class="btn-group btn-group-toggle d-flex justify-content-center" data-toggle="buttons">
            <label class="btn btn-primary active mr-2 category-btn" data-category="all">
              <input type="radio" name="options" id="all" checked> All
            </label>
            <label class="btn btn-primary mr-2 category-btn" data-category="men">
              <input type="radio" name="options" id="men"> Men
            </label>
            <label class="btn btn-primary category-btn" data-category="women">
              <input type="radio" name="options" id="women"> Women
            </label>
          </div>
        </div>
      </div>
      <div class="row" id="product-row">
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='./images/Picture1 (10).jpg') }}" class="card-img-top"
              alt="Product 1" style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Grey Long-Sleeve</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>23<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>34<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='./images/Picture1 (9).jpg') }}" class="card-img-top"
              alt="Product 1" style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Green T-Shirt</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>24<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>50<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='./images/Picture1 (8).jpg') }}" class="card-img-top"
              alt="Product 1" style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">USF Bulls Green T-Shirt</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>22<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>36<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/Picture1 (7).jpg') }}" class="card-img-top" alt="Product 1"
              style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Green Hoodie</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>18<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>30<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/Picture1 (6).jpg') }}" class="card-img-top" alt="Product 1"
              style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Green Long-Sleeve</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>42<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>60<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/Picture1 (5).jpg') }}" class="card-img-top" alt="Product 1"
              style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Dark Green Long-Sleeve</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>31<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>74<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/Picture1 (4).jpg') }}" class="card-img-top" alt="Product 1"
              style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Light Green T-Shirt</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>45<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>60<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/Picture1.jpg') }}" class="card-img-top" alt="Product 1"
              style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Dark Green T-Shirt</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>33<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>40<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/Picture1 (2).jpg') }}" class="card-img-top" alt="Product 1"
              style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Camo Long-Sleeve</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>12<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>25<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="men">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/Picture1 (3).jpg') }}" class="card-img-top" alt="Product 1"
              style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Cream T-Shirt</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>13<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>30<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="men"></div>
          </div>
        </div>

        <div class="col-md-4 mb-4" data-category="women">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/MicrosoftTeams-image (1).png') }}" class="card-img-top"
              alt="Product 1" style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Green Tank Top</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>50<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>75<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="women"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="women">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/MicrosoftTeams-image (6).png') }}" class="card-img-top"
              alt="Product 1" style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">USF Grey Hoodie</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>17<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>30<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="women"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="women">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/MicrosoftTeams-image (5).png') }}" class="card-img-top"
              alt="Product 1" style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Grey T-Shirt</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>22<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>30<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="women"></div>
          </div>
        </div>
        <div class="col-md-4 mb-4" data-category="women">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/MicrosoftTeams-image (4).png') }}" class="card-img-top"
              alt="Product 1" style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls White Shirt</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>23<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>30<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="women"></div>
          </div>
        </div>

        <div class="col-md-4 mb-4" data-category="women">
          <div class="card position-relative">
            <img src="{{ url_for('static', filename='images/MicrosoftTeams-image (2).png') }}" class="card-img-top"
              alt="Product 1" style="max-height: 200px; object-fit: contain;">
            <div class="sale-stamp position-absolute">
              <span>SALE</span>
            </div>
            <div class="card-body">
              <h5 class="card-title">Bulls Green Skirt</h5>
              <p class="card-text">
                <span class="d-block reduced-price"><sup>$</sup>29<span>.00</span></span>
                <span class="d-block regular-price"><sup>$</sup>40<span>.00</span></span>
              </p>
              <a href="#" class="btn btn-primary add-to-cart-btn">Add to Cart</a>
            </div>
            <div class="category" data-category="women"></div>
          </div>
        </div>
      </div>
    </div>
  </section>



  <footer class="bg-success py-3">
    <div class="container text-center">
      <p class="mb-0 text-white">&copy; 2023 USF Bulls Store</p>
    </div>
  </footer>

  <!-- Link to jQuery, Bootstrap, and Font Awesome JS files -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/js/all.min.js"></script>
  <script>
    $(document).ready(function () {
      // Store all the product cards in a variable
      var products = $('#product-row').children();

      // Add a click event listener to the category buttons
      $('.category-btn').click(function () {
        var category = $(this).data('category');

        // Show all products if "All Products" button is clicked
        if (category === 'all') {
          products.show();
        } else {
          // Otherwise, hide all products that don't belong to the selected category
          products.each(function () {
            var productCategory = $(this).find('.category').data('category');
            if (productCategory !== category) {
              $(this).hide();
            } else {
              $(this).show();
            }
          });
        }
      });
      $('.add-to-cart-btn').click(function () {
        fetch('/check-user')
          .then(response => response.json())
          .then(data => {
            if (data.logged_in) {
              var productName = $(this).closest('.card').find('.card-title').text();
              var originalPrice = $(this).closest('.card').find('.regular-price').text().substring(1);
              var productPrice = $(this).closest('.card').find('.reduced-price').text().substring(1); // Remove the dollar sign
              var productImage = $(this).closest('.card').find('.card-img-top').attr('src');
              var item = {
                productName: productName,
                originalPrice: originalPrice,
                productPrice: productPrice,
                productImage: productImage,
                customer_id: data.user[0]
              }
              // User is logged in, make another AJAX call to add the item to the cart
              fetch('/addToCart', {
                method: 'POST',
                body: JSON.stringify({ item: item }),
                headers: {
                  'Content-Type': 'application/json'
                }
              })
                .then(response => response.json())
                .then(data => {
                  // Handle the success response
                  if (data.success) {
                    alert('Item added to cart!');
                  } else {
                    alert('Error adding item to cart!');
                  }
                });
            } else {
              // User is not logged in, show a message asking the user to log in
              alert('Please log in to add item to cart.');
            }
          });
      });
    });
  </script>


</body>

</html>